<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <title>54arrayFilter</title>
    <style>
        p.export > img{
            width: 300px;
            height: 200px;
            object-fit: cover;
        }
    </style>
</head>

<body>

    <button id="btF">객체 필터링버튼</button>
    <p class="filter"></p>
    <button id="btE">객체내용 출력버튼</button>
    
    <script>
        // .filter()와 .map()응용하기
        // 배열 안 객체에서, 원하는 결과값만 추출하기
        let character = [
            { "name": "피카츄", "dinner": "피자", "url": "/images/pizza.jpg" },
            { "name": "파이리", "dinner": "초밥", "url": "/images/sushi.jpg" },
            { "name": "꼬부기", "dinner": "스테이크", "url": "/images/steak.jpg" }
        ];

        let men = character.filter(function (index) {
            return index.dinner == "초밥"
        });
        console.log(men[0].name);
        
        // 화살표함수로 변경
        let men2 = character.filter( index => index.dinner == "초밥" )
                            .map( index => index.name)
        console.log(men2[0]);
        
        // 객체의 내용 body에 출력시키기
        var item = character[2].dinner; // 피자
        console.log(item);

        // 필터링 한 결과값만 출력
        function filtering(){
            let p = document.querySelector('p.filter');
            let img = document.createElement('img');
            p.appendChild(img);
            
            let result = character.filter( index => index.dinner == item );
            console.log(result); // dinner의 값이 item과 동일한 객체 추출하여 배열화
            
            let txt  = document.createTextNode(`${result[0].name}는 저녁식사로 ${item} 먹었습니다 :9`);
            p.appendChild(txt);
            img.setAttribute(`src`,`${result[0].url}`);
            img.setAttribute(`alt`,`${item}`);
            img.style.display = `block`;
        }
        btF.addEventListener('click', filtering);

        // 배열의 전체 결과값출력
        function exporting(){
            for(var i of character){
                // 배열의 수 만큼 객체 생성
                let p = document.createElement(`p`);
                p.setAttribute(`class`,`export`)
                let img = document.createElement(`img`);
                p.appendChild(img);
                document.body.appendChild(p);
                
                var txt  = document.createTextNode(`${i.name}는 점심식사로 ${i.dinner}  먹었습니다 :D`);
                // console.log(`${i.dinner}`);
                p.appendChild(txt);
                img.setAttribute(`src`,`${i.url}`);
                img.setAttribute(`alt`,`${i.dinner}`);
                img.style.display = `block`;
            }

        }
        btE.addEventListener('click', exporting);
            
    </script>
</body>

</html>